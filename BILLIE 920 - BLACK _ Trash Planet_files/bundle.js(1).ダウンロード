var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function s(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function f(){return a("")}function d(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let p;function m(t){p=t}function h(){if(!p)throw new Error("Function called outside component initialization");return p}function g(t){h().$$.on_mount.push(t)}function $(t){h().$$.on_destroy.push(t)}const b=[],y=[],w=[],v=[],k=Promise.resolve();let x=!1;function E(t){w.push(t)}let _=!1;const O=new Set;function N(){if(!_){_=!0;do{for(let t=0;t<b.length;t+=1){const n=b[t];m(n),S(n.$$)}for(b.length=0;y.length;)y.pop()();for(let t=0;t<w.length;t+=1){const n=w[t];O.has(n)||(O.add(n),n())}w.length=0}while(b.length);for(;v.length;)v.pop()();x=!1,_=!1,O.clear()}}function S(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const P=new Set;let M;function A(){M={r:0,c:[],p:M}}function T(){M.r||o(M.c),M=M.p}function C(t,n){t&&t.i&&(P.delete(t),t.i(n))}function j(t,n,e,o){if(t&&t.o){if(P.has(t))return;P.add(t),M.c.push(()=>{P.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function R(t){t&&t.c()}function q(t,e,c){const{fragment:i,on_mount:u,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,c),E(()=>{const e=u.map(n).filter(r);s?s.push(...e):o(e),t.$$.on_mount=[]}),l.forEach(E)}function J(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function L(t,n){-1===t.$$.dirty[0]&&(b.push(t),x||(x=!0,k.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function H(n,r,c,i,u,l,a=[-1]){const f=p;m(n);const d=r.props||{},h=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:e(),dirty:a};let g=!1;if(h.ctx=c?c(n,d,(t,e,...o)=>{const r=o.length?o[0]:e;return h.ctx&&u(h.ctx[t],h.ctx[t]=r)&&(h.bound[t]&&h.bound[t](r),g&&L(n,t)),e}):[],h.update(),g=!0,o(h.before_update),h.fragment=!!i&&i(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(s)}else h.fragment&&h.fragment.c();r.intro&&C(n.$$.fragment),q(n,r.target,r.anchor),N()}m(f)}class B{$destroy(){J(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const I=document.currentScript.src;function U(){const t=new URL(I).searchParams.get("targetId"),n=t||"slick-scroll-progress-bar-codeword";return document.body.querySelector("#"+n)}const z=document.currentScript.src;function F(t){return function(t,n){return new URL(n).searchParams.get(t)||""}(t,z)}function D(t){const{showOnName:n,showOnRegexSource:e}=t,o=new RegExp(e,"gim");if("allPages"===n)return!0;if("homePage"===n)return"/"===window.location.pathname;if("urlMatch"===n){const t=window.location.href;return o.test(t)}const r=window.location.pathname;return o.test(r)}function G(t){let n,e,o,r;return{c(){n=l("div"),e=l("div"),d(e,"id","slick-scroll-progress-bar-inner"),d(e,"style",o=`height: ${t[0].height}px; background: linear-gradient(to right,${Q(t[0].backgroundColor)} var(--scroll),transparent 0); width: 100%;`),d(n,"class","slick-scroll-progress-bar svelte-pp5x6t"),d(n,"style",r=`position: ${t[1]&&"TOP"===t[0].position?"sticky":"fixed"}; ${"TOP"===t[0].position?"top: 0; left: 0;":"bottom: 0; left: 0;"} height: ${t[0].height}px;`)},m(t,o){u(t,n,o),i(n,e)},p(t,c){1&c&&o!==(o=`height: ${t[0].height}px; background: linear-gradient(to right,${Q(t[0].backgroundColor)} var(--scroll),transparent 0); width: 100%;`)&&d(e,"style",o),1&c&&r!==(r=`position: ${t[1]&&"TOP"===t[0].position?"sticky":"fixed"}; ${"TOP"===t[0].position?"top: 0; left: 0;":"bottom: 0; left: 0;"} height: ${t[0].height}px;`)&&d(n,"style",r)},d(t){t&&s(n)}}}function K(n){let e,o=D(n[0])||n[1],r=o&&G(n);return{c(){r&&r.c(),e=f()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){1&n&&(o=D(t[0])||t[1]),o?r?r.p(t,n):(r=G(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&s(e)}}}function Q(t){return`rgba(${t.r},${t.g},${t.b},${t.a})`}function V(t,n,e){const o="true"===F("developmentMode");let{config:r}=n,c=0;function i(){var t=document.documentElement.scrollTop||document.body.scrollTop,n=(document.documentElement.scrollHeight||document.body.scrollHeight)-document.documentElement.clientHeight;c=t/n*100+"%",document.getElementById("slick-scroll-progress-bar-inner").style.setProperty("--scroll",c)}return g(()=>{window.addEventListener("scroll",i,{passive:!0})}),$(()=>{window.removeEventListener("scroll",i,{passive:!0})}),t.$set=t=>{"config"in t&&e(0,r=t.config)},[r,o]}class W extends B{constructor(t){super(),H(this,t,V,K,c,{config:0})}}function X(t){let n;const e=new W({props:{config:t[0]}});return{c(){R(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.config=t[0]),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function Y(t){let n,e,o=t[0]&&X(t);return{c(){o&&o.c(),n=f()},m(t,r){o&&o.m(t,r),u(t,n,r),e=!0},p(t,[e]){t[0]?o?(o.p(t,e),1&e&&C(o,1)):(o=X(t),o.c(),C(o,1),o.m(n.parentNode,n)):o&&(A(),j(o,1,1,()=>{o=null}),T())},i(t){e||(C(o),e=!0)},o(t){j(o),e=!1},d(t){o&&o.d(t),t&&s(n)}}}function Z(t,n,e){let o=U(),r=o.getAttribute("data-config"),c=r?JSON.parse(r):null,i=new MutationObserver((function(t){t.forEach((function(t){if("attributes"==t.type){let t=o.getAttribute("data-config");e(0,c=t?JSON.parse(t):null)}}))}));var u;return g(()=>{i.observe(o,{attributes:!0})}),$(()=>{i.disconnect()}),u=()=>{r=o.getAttribute("data-config"),e(0,c=r?JSON.parse(r):null)},h().$$.after_update.push(u),[c]}class tt extends B{constructor(t){super(),H(this,t,Z,Y,c,{})}}function nt(n){let e,o,r=n[4].message+"";return{c(){e=l("p"),o=a(r)},m(t,n){u(t,e,n),i(e,o)},p:t,i:t,o:t,d(t){t&&s(e)}}}function et(n){let e,o,r=n[3]&&function(n){let e;const o=new W({props:{config:n[3]}});return{c(){R(o.$$.fragment)},m(t,n){q(o,t,n),e=!0},p:t,i(t){e||(C(o.$$.fragment,t),e=!0)},o(t){j(o.$$.fragment,t),e=!1},d(t){J(o,t)}}}(n);return{c(){r&&r.c(),e=f()},m(t,n){r&&r.m(t,n),u(t,e,n),o=!0},p(t,n){t[3]&&r.p(t,n)},i(t){o||(C(r),o=!0)},o(t){j(r),o=!1},d(t){r&&r.d(t),t&&s(e)}}}function ot(n){let e;return{c(){e=l("div")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&s(e)}}}function rt(t){let n,e,o,r={ctx:t,current:null,token:null,pending:ot,then:et,catch:nt,value:3,error:4,blocks:[,,,]};return function(t,n){const e=n.token={};function o(t,o,r,c){if(n.token!==e)return;n.resolved=c;let i=n.ctx;void 0!==r&&(i=i.slice(),i[r]=c);const u=t&&(n.current=t)(i);let s=!1;n.block&&(n.blocks?n.blocks.forEach((t,e)=>{e!==o&&t&&(A(),j(t,1,1,()=>{n.blocks[e]=null}),T())}):n.block.d(1),u.c(),C(u,1),u.m(n.mount(),n.anchor),s=!0),n.block=u,n.blocks&&(n.blocks[o]=u),s&&N()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const e=h();if(t.then(t=>{m(e),o(n.then,1,n.value,t),m(null)},t=>{m(e),o(n.catch,2,n.error,t),m(null)}),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var r}(e=t[0],r),{c(){n=f(),r.block.c()},m(t,e){u(t,n,e),r.block.m(t,r.anchor=e),r.mount=()=>n.parentNode,r.anchor=n,o=!0},p(n,[e]){{const o=(t=n).slice();o[3]=r.resolved,r.block.p(o,e)}},i(t){o||(C(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){j(r.blocks[t])}o=!1},d(t){t&&s(n),r.block.d(t),r.token=null,r=null}}}function ct(t,n,e){let{merchant:o}=n;var r,c;let i=(r="https://api.slick-scroll-progress-bar.codeword.tech/",async function(t,n){const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",...c},body:JSON.stringify({query:t,variables:n})}),o=await e.json();if(o.error)throw new Error(o.error.message);return o.data})("\n  query($merchant: String!) {\n    config(where: { merchant: $merchant }) {\n      id\n      merchant\n      updatedAt\n      createdAt\n      pluginEnabled\n      position\n      showOnName\n      showOnRegexSource\n      backgroundColor {\n        r \n        b\n        g\n        a\n      }\n      height\n    }\n  }\n",{merchant:o}).then(t=>t.config);return t.$set=t=>{"merchant"in t&&e(1,o=t.merchant)},[i,o]}class it extends B{constructor(t){super(),H(this,t,ct,rt,c,{merchant:1})}}function ut(t){let n;const e=new it({props:{merchant:t[0]}});return{c(){R(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.merchant=t[0]),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function st(n){let e;const o=new tt({});return{c(){R(o.$$.fragment)},m(t,n){q(o,t,n),e=!0},p:t,i(t){e||(C(o.$$.fragment,t),e=!0)},o(t){j(o.$$.fragment,t),e=!1},d(t){J(o,t)}}}function lt(t){let n,e,o,r;const c=[st,ut],i=[];function l(t,n){return t[1]?0:1}return n=l(t),e=i[n]=c[n](t),{c(){e.c(),o=f()},m(t,e){i[n].m(t,e),u(t,o,e),r=!0},p(t,[r]){let u=n;n=l(t),n===u?i[n].p(t,r):(A(),j(i[u],1,1,()=>{i[u]=null}),T(),e=i[n],e||(e=i[n]=c[n](t),e.c()),C(e,1),e.m(o.parentNode,o))},i(t){r||(C(e),r=!0)},o(t){j(e),r=!1},d(t){i[n].d(t),t&&s(o)}}}function at(t,n,e){let{merchant:o}=n,{developmentMode:r}=n;return t.$set=t=>{"merchant"in t&&e(0,o=t.merchant),"developmentMode"in t&&e(1,r=t.developmentMode)},[o,r]}const ft="true"===F("developmentMode"),dt=F("shop");return new class extends B{constructor(t){super(),H(this,t,at,lt,c,{merchant:0,developmentMode:1})}}({target:U(),props:{merchant:dt,developmentMode:ft},intro:!0})}();
//# sourceMappingURL=bundle.js.map
